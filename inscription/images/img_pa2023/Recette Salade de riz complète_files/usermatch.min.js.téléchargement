/** Do not edit manual manually - c4d5477 **/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,c={next:function(){if(d<a.length){var e=d++;return{value:b(e,a[e]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill=function(a,b,d,c){if(b){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
function _instanceof(a,b){return null!=b&&"undefined"!==typeof Symbol&&b[Symbol.hasInstance]?!!b[Symbol.hasInstance](a):a instanceof b}function _classCallCheck(a,b){if(!_instanceof(a,b))throw new TypeError("Cannot call a class as a function");}function _defineProperties(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}
function _createClass(a,b,d){b&&_defineProperties(a.prototype,b);d&&_defineProperties(a,d);return a}
try{var UserMatch=function(){this.cookiesName={consent_rules_local:"undefined"!==typeof COOKIE_CONSENTEMENT?COOKIE_CONSENTEMENT:"cookie_consent_rules",consent_rules_cross:void 0,device:"device_id",user_match:"id_user_match"};this.getParamsName={user_match:"ium"};this.state={consent_rules:!1,device:!1,user_match:!1};this.cookiesTTL={consent_rules:{cross:390},device:{local:5,cross:7},user_match:{local:5,cross:390}};this.siteInfos=this.getHostnameInfos(window.location.hostname);this.consentRulesAssocIdName=
{1:"analytics",2:"personalization",3:"adtargeting",4:"socialnetwork"};this.id_user_match=this.event_id=this.device_id=null;this.global_state=!1;this.url_storage=CookieCross.baseUrl+"/event.php"},UMDebug="undefined"!==typeof UMDebug?UMDebug:function(){function a(){_classCallCheck(this,a)}_createClass(a,null,[{key:"print",value:function(a){console.log(a)}},{key:"send_err",value:function(a,d,c){var b=CookieCross.baseUrl+"/throw_info.php";a={error:{type:""+JSON.stringify(a),info:""+JSON.stringify(d)+
" : "+navigator.userAgent,code:parseInt(c)}};CrossRequest.send(b,a)}}]);return a}(),GetParams="undefined"!==typeof GetParams?GetParams:function(){function a(){_classCallCheck(this,a)}_createClass(a,null,[{key:"read",value:function(a){var b=null,c=[];window.location.search.substr(1).split("&").forEach(function(d){c=d.split("=");if(c[0]===a)return b=decodeURIComponent(c[1]).trim(),""===b&&(b=null),!0});return b}}]);return a}(),CookieLocal="undefined"!==typeof CookieLocal?CookieLocal:function(){function a(){_classCallCheck(this,
a)}_createClass(a,null,[{key:"calculExpireTime",value:function(a){var b=new Date;b.setTime(b.getTime()+864E5*a);return b}},{key:"create",value:function(b,d,c){var e=[];e.push(b+"="+d);"string"===typeof a.domain&&e.push("domain="+a.domain);void 0!==c&&e.push("expires="+this.calculExpireTime(c).toGMTString());e.push("path=/");e.push("Secure");document.cookie=e.join(";");return e.join(";")}},{key:"read",value:function(a){a+="=";for(var b=decodeURIComponent(document.cookie).split(";"),c=0;c<b.length;c++){var e=
b[c].trim();if(0===e.indexOf(a))return e.substring(a.length,e.length)}return null}},{key:"unset",value:function(a){return this.create(a,"",-1)}}]);return a}(),CrossRequest="undefined"!==typeof CrossRequest?CrossRequest:function(){function a(){_classCallCheck(this,a)}_createClass(a,null,[{key:"send",value:function(b,d){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0;"undefined"===typeof c&&(c=function(a){});var g=null,
h=null;!0===e?(h="POST",g="datas="+JSON.stringify(d)):(h="GET",b+=a.jsonToGetParams(d));var f=new XMLHttpRequest;f.open(h,b,!0);f.withCredentials=!0;f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");f.onreadystatechange=function(){c(f)};f.send(g)}},{key:"jsonToGetParams",value:function(a){return"?"+Object.keys(a).map(function(b){return b+"="+encodeURIComponent(a[b])}).join("&")}}]);return a}(),EventCollector="undefined"!==typeof EventCollector?EventCollector:function(){function a(){_classCallCheck(this,
a)}_createClass(a,null,[{key:"send",value:function(b,d,c,e){if(-1===["event","info"].indexOf(e))return!1;var g=a.urls[e];c=a.parseDatas(c,e);CrossRequest.send(g,c,function(a){if(4==a.readyState&&200==a.status)b[d](a.responseText)},!1)}},{key:"parseDatas",value:function(a,d){var b={service:a.service,device_type:"m6group_web",customer:"m6web","uids[0][uid_type]":"mindbaz","uids[0][uid]":"unknown"};"undefined"!==typeof a.device_id&&(b.device_id=a.device_id);"undefined"!==typeof a.uid&&(b["uids[0][uid]"]=
a.uid);if("info"===d)return b;b.event_type="raw_user_consents";b["data[consents_updated]"]=a.consent_rules_updated.toString();for(var e in a.consent_rules)b["data["+e+"][consent]"]=a.consent_rules[e],b["data["+e+"][form]"]="explicit";return b}}]);return a}();EventCollector.urls={};EventCollector.urls.base_url="//e.m6web.fr";EventCollector.urls.info="undefined"!==typeof USERMATCH_EVENT_COLLECTOR_URL_INFO?USERMATCH_EVENT_COLLECTOR_URL_INFO:EventCollector.urls.base_url+"/info";EventCollector.urls.event=
"undefined"!==typeof USERMATCH_EVENT_COLLECTOR_URL_EVENT?USERMATCH_EVENT_COLLECTOR_URL_EVENT:EventCollector.urls.base_url+"/event";var CookieCross="undefined"!==typeof CookieCross?CookieCross:function(){function a(){_classCallCheck(this,a)}_createClass(a,null,[{key:"create",value:function(b,d,c){var e=a.baseUrl+"/setcookie.php";b={name:b,value:d};void 0!==c&&(b.nbDays=c);CrossRequest.send(e,b)}},{key:"readAll",value:function(b,d){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;
"undefined"===typeof c&&(c={});CrossRequest.send(a.baseUrl+"/getcookie.php",c,function(a){if(4==a.readyState&&200==a.status)b[d](a.responseText)})}}]);return a}();CookieCross.baseUrl="undefined"!==typeof USERMATCH_COOKIES_MANAGEMENT?USERMATCH_COOKIES_MANAGEMENT:"//usermatch.m6tech.net";var ParseCookieCpc="undefined"!==typeof ParseCookieCpc?ParseCookieCpc:function(){function a(){_classCallCheck(this,a)}_createClass(a,null,[{key:"prepareConfiguration",value:function(b){for(var d in b)a.configuration.consents[b[d]].ccr=
d;a.configuration.cookie_values=[]}},{key:"parseCpc",value:function(b){b.split(",").forEach(function(b){b=b.trim();if(""==b)return!1;var c=b.split("-").shift();if(-1!==a.configuration.special_keys.cpc.indexOf(c))return a.configuration.cookie_values.push(c),!0;a.configuration.cookie_values.push(b);return!0})}},{key:"convertCpcToCcr",value:function(b){if("undefined"===typeof a.configuration.consents[b])return"0";b=a.configuration.consents[b].cpc;if(0===b.length)return"0";for(var d=0,c=b.length;d<c;d++)if(-1===
a.configuration.cookie_values.indexOf(b[d]))return"0";return"1"}},{key:"toCcr",value:function(b){var d=CookieLocal.read(a.configuration.cookie_name);if(null===d)return null;a.prepareConfiguration(b);a.parseCpc(d);b=[];for(var c in a.configuration.consents){d=a.configuration.consents[c].ccr;var e=a.convertCpcToCcr(c);b.push(d+":"+e)}return b.join(",")}}]);return a}();ParseCookieCpc.configuration={cookie_name:"cmp_purposes_consent",consents:{analytics:{cpc:["cookies","market_research","measure_content_performance",
"mesureda"]},personalization:{cpc:["cookies","create_content_profile","improve_products","personnali","select_personalized_content"]},adtargeting:{cpc:"cookies create_ads_profile measure_ad_performance publicite select_basic_ads select_personalized_ads".split(" ")},socialnetwork:{cpc:["reseauxso"]}},special_keys:{cpc:["mesureda","personnali","publicite","reseauxso"]}};UserMatch.prototype.getConsentRulesFromCookie=function(){var a=CookieLocal.read(this.cookiesName.consent_rules_local);"string"===typeof a&&
(a=a.replace(/[^0-4:,]/g,""));return a};UserMatch.prototype.getDeviceIdFromCookie=function(){return CookieLocal.read(this.cookiesName.device)};UserMatch.prototype.getUserMatchFromGet=function(){return GetParams.read(this.getParamsName.user_match)};UserMatch.prototype.getHostnameInfos=function(a){a=a.split(".").slice(-2);if(2>a.length)return{domain:"unknown",ltd:"m6"};CookieLocal.domain=a.join(".");return{ltd:a.pop(),domain:a.pop()}};UserMatch.prototype.is_consents_valid=function(){var a=!1,b=this.parseConsentRules(this.consent_rules),
d;for(d in b)!0===b[d]&&(a=!0);return a};UserMatch.prototype.check_globalState_for_ec=function(){return 0==this.is_set_cookie_cross?(CookieCross.create(this.cookiesName.device,"",-1),"nothing"):"unexists"===this.state.device&&"unexists"===this.state.consent_rules?"info":-1!==["unexists"].indexOf(this.state.consent_rules)?"nothing":-1===["same"].indexOf(this.state.consent_rules)||"unexists"===this.state.device||-1===["same","restore","unexists"].indexOf(this.state.user_match)?"event":"nothing"};UserMatch.prototype.createSiteId=
function(){return this.siteInfos.domain+"_"+this.siteInfos.ltd};UserMatch.prototype.createCookieNameConsentRules=function(){return this.cookiesName.consent_rules_local+"_"+this.createSiteId()};UserMatch.prototype.updateState=function(a,b){return this.state[a]=b};UserMatch.prototype.check_deviceId=function(a,b){if(0==this.is_set_cookie_cross)return CookieCross.create(a,"",-1),this.updateState("device","unexists");if("undefined"!==typeof this.oldCookieValues[a]){var d=this.oldCookieValues[a].value;
if(b===d)return this.updateState("device","same");this.device_id=d;CookieLocal.create(a,d,this.cookiesTTL.device.local);return null!==b?this.updateState("device","update"):this.updateState("device","restore")}if(null===b)return this.updateState("device","unexists");this.device_id=b;CookieCross.create(a,b,this.cookiesTTL.device.cross);return this.updateState("device","restore")};UserMatch.prototype.check_idUserMatch=function(a,b){if(null===b){if("undefined"===typeof this.oldCookieValues[a])return this.updateState("user_match",
"unexists");this.id_user_match=this.oldCookieValues[a].value;CookieLocal.create(a,this.id_user_match,this.cookiesTTL.user_match.local);return this.updateState("user_match","restore")}return"undefined"===typeof this.oldCookieValues[a]?(CookieCross.create(a,b,this.cookiesTTL.user_match.cross),CookieLocal.create(a,b,this.cookiesTTL.user_match.local),this.updateState("user_match","create")):this.oldCookieValues[a].value!==b?(CookieCross.create(a,b,this.cookiesTTL.user_match.cross),CookieLocal.create(a,
b,this.cookiesTTL.user_match.local),this.updateState("user_match","update")):this.updateState("user_match","same")};UserMatch.prototype.check_consentRules=function(a,b){if(0==this.is_set_cookie_cross)return CookieCross.create(a,"",-1),this.updateState("consent_rules","delete");if(null===b){if("undefined"===typeof this.oldCookieValues[a])return this.updateState("consent_rules","unexists");CookieCross.create(a,"",-1);return this.updateState("consent_rules","delete")}return""===b?this.updateState("consent_rules",
"unexists"):"undefined"===typeof this.oldCookieValues[a]?(CookieCross.create(a,b,this.cookiesTTL.consent_rules.cross),this.updateState("consent_rules","create")):this.oldCookieValues[a].value!==b?(CookieCross.create(a,b,this.cookiesTTL.consent_rules.cross),this.updateState("consent_rules","update")):this.updateState("consent_rules","same")};UserMatch.prototype.readOldCookieValues=function(a){CookieCross.readAll(this,"setOldCookieValues",{domain:this.siteInfos.domain})};UserMatch.prototype.setOldCookieValues=
function(a){this.oldCookieValues={};try{this.oldCookieValues=JSON.parse(a)}catch(b){UMDebug.send_err("socv",b+" : "+JSON.stringify(a),1)}try{this.start_web_step2()}catch(b){UMDebug.send_err("sws2",b+" : "+JSON.stringify(this.state),5)}};UserMatch.prototype.isUpdatedConsentRules=function(){return-1!==["update","delete"].indexOf(this.state.consent_rules)?!0:!1};UserMatch.prototype.sendInfosToEventCollector=function(a){var b={};b.service=this.siteInfos.domain;null!==this.id_user_match&&(b.uid=this.id_user_match);
null!==this.device_id&&(b.device_id=this.device_id);"event"===a&&(b.consent_rules=this.parseConsentRules(this.consent_rules),b.consent_rules_updated=this.isUpdatedConsentRules());EventCollector.send(this,"storeDeviceId",b,a)};UserMatch.prototype.sendInfosToUserMatch=function(){if(-1===["event","info"].indexOf(this.global_state)||null===this.device_id||void 0===this.device_id||null===this.event_id||void 0===this.event_id)return!1;var a={service:this.siteInfos.domain,type:this.global_state,device_id:this.device_id,
event_id:this.event_id,consent_rules:this.parseConsentRules(this.consent_rules),consent_rules_updated:this.isUpdatedConsentRules()};null!==this.id_user_match&&(a.uid=this.id_user_match);CrossRequest.send(this.url_storage,a);return!0};UserMatch.prototype.storeDeviceId=function(a){try{a=JSON.parse(a),"undefined"!==typeof a.device_id&&(this.device_id=a.device_id,this.event_id=a.event_id,CookieLocal.create(this.cookiesName.device,a.device_id,this.cookiesTTL.device.local),CookieCross.create(this.cookiesName.device,
a.device_id,this.cookiesTTL.device.cross),this.sendInfosToUserMatch())}catch(b){UMDebug.send_err("sdi",b,2)}};UserMatch.prototype.generateDefaultConsentRules=function(){var a={},b;for(b in this.consentRulesAssocIdName)a[this.consentRulesAssocIdName[b]]=!1;return a};UserMatch.prototype.parseConsentRules=function(a){var b=this.generateDefaultConsentRules();if(null===a)return b;var d=this;try{a.split(",").forEach(function(a){var c=a.split(":");a=d.consentRulesAssocIdName[c[0]];if("undefined"===typeof a)return!1;
c=1===parseInt(c[1])?!0:!1;b[a]=c})}catch(c){UMDebug.send_err("pcr",c+" : "+JSON.stringify(a)+" : "+JSON.stringify(this.state),3)}return b};UserMatch.prototype.parseTcfConsents=function(){var a=ParseCookieCpc.toCcr(this.consentRulesAssocIdName);null!==a&&CookieLocal.create(this.cookiesName.consent_rules_local,a)};UserMatch.prototype.start_web_step1=function(){this.readOldCookieValues()};UserMatch.prototype.start_web_step2=function(){this.id_user_match=this.getUserMatchFromGet();this.check_idUserMatch(this.cookiesName.user_match,
this.id_user_match);try{var a=this.start_web_step3()}catch(b){UMDebug.send_err("sws3",b+" : "+JSON.stringify(this.state),6)}return a};UserMatch.prototype.start_web_step3=function(){this.device_id=this.getDeviceIdFromCookie();this.check_deviceId(this.cookiesName.device,this.device_id);try{var a=this.start_web_step4()}catch(b){UMDebug.send_err("sws4",b+" : "+JSON.stringify(this.state),7)}return a};UserMatch.prototype.start_web_step4=function(){this.parseTcfConsents();this.cookiesName.consent_rules_cross=
this.createCookieNameConsentRules();this.consent_rules=this.getConsentRulesFromCookie();this.is_set_cookie_cross=this.set_cookie_consent_local=this.is_consents_valid();0==this.set_cookie_consent_local&&CookieLocal.create(this.cookiesName.consent_rules_local,"",-1);this.check_consentRules(this.cookiesName.consent_rules_cross,this.consent_rules);try{var a=this.start_web_step5()}catch(b){UMDebug.send_err("sws5",b+" : "+JSON.stringify(this.state),8)}return a};UserMatch.prototype.start_web_step5=function(){var a=
this.check_globalState_for_ec();if(-1===["event","info"].indexOf(a))return!1;this.global_state=a;this.sendInfosToEventCollector(a);return!0};UserMatch.prototype.start_sp_step1=function(a){if(null==a)return!1;CookieCross.create(this.cookiesName.user_match,a,this.cookiesTTL.user_match.cross);return!0};if("undefined"===typeof module){var USER_MATCH=new UserMatch;try{switch(USER_MATCH.start_sp_step1(USER_MATCH.getUserMatchFromGet()),document.getElementById("usermatch-tag").dataset.run){case "web":USER_MATCH.start_web_step1()}}catch(a){}}else try{module.exports=
{CookieLocal:CookieLocal,CookieCross:CookieCross,UserMatch:UserMatch,GetParams:GetParams,CrossRequest:CrossRequest,EventCollector:EventCollector,UMDebug:UMDebug,ParseCookieCpc:ParseCookieCpc}}catch(a){}}catch(a){};